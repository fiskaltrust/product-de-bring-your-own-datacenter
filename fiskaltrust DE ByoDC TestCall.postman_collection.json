{
	"info": {
		"_postman_id": "3ecc8c5f-d19c-4013-831b-8413ff5a62d4",
		"name": "fiskaltrust DE ByoDC TestCall",
		"description": "Sample requests that demonstrate how to access ByoDC",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "1. Echo - Cashbox Restart",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "cashboxid",
						"value": "{{cashbox_id}}",
						"type": "text"
					},
					{
						"key": "accesstoken",
						"value": "{{accesstoken}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"message\": \"\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/api/Echo",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"Echo"
					]
				},
				"description": "Restarts a Cashbox and reloads Config"
			},
			"response": []
		},
		{
			"name": "2. Initial Operation Receipt",
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n \"ftCashBoxID\": \"{{cashbox_id}}\",\r\n \"cbTerminalID\": \"101\",\r\n \"cbReceiptReference\": \"INIT\",\r\n \"cbReceiptMoment\": \"{{current_moment}}\",\r\n \"cbChargeItems\": [],\r\n \"cbPayItems\": [],\r\n \"ftReceiptCase\": 4919338172267102211,\r\n \"cbUser\": \"Admin\"\r\n}\r\n\r\n",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/json/v1/Sign",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"json",
						"v1",
						"Sign"
					]
				},
				"description": "Registers the client in the TSE (needed only once)"
			},
			"response": []
		},
		{
			"name": "3. ByoDC Barumsatz",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "cashboxid",
						"value": "{{cashbox_id}}",
						"type": "text"
					},
					{
						"key": "accesstoken",
						"value": "{{accesstoken}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"ftCashBoxID\": \"{{cashbox_id}}\",\r\n    \"cbTerminalID\": \"1\",\r\n    \"cbReceiptReference\": \"VORGANG-1020\",\r\n    \"cbReceiptMoment\": \"{{current_moment}}\",\r\n    \"cbChargeItems\": [\r\n        {\r\n            \"Quantity\": 1.0,\r\n            \"Description\": \"Artikel 1\",\r\n            \"Amount\": 33.06,\r\n            \"VATRate\": 16.0,\r\n            \"ftChargeItemCase\": 4919338167972134913,\r\n            \"Moment\":\"{{current_moment}}\"\r\n        },\r\n        {\r\n            \"Quantity\": 1.0,\r\n            \"Description\": \"Artikel 2\",\r\n            \"Amount\": 5.69,\r\n            \"VATRate\": 16.0,\r\n            \"ftChargeItemCase\": 4919338167972134913,\r\n            \"Moment\":\"{{current_moment}}\"\r\n        }\r\n    ],\r\n    \"cbPayItems\": [\r\n        {\r\n            \"Quantity\": 1.0,\r\n            \"Description\": \"Bar\",\r\n            \"Amount\": 38.75,\r\n            \"ftPayItemCase\": 4919338167972134913,\r\n            \"Moment\":\"{{current_moment}}\"\r\n        }\r\n    ],\r\n    \"ftReceiptCase\": 4919338172267102209\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/api/Sign",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"Sign"
					]
				},
				"description": "sends a pos-receipt with implicit flow"
			},
			"response": []
		},
		{
			"name": "4. Zero Receipt (+ TSE Info)",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "cashboxid",
						"value": "{{cashbox_id}}",
						"type": "text"
					},
					{
						"key": "accesstoken",
						"value": "{{accesstoken}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"ftCashBoxID\": \"{{cashbox_id}}\",\r\n  \"cbTerminalID\": \"1\",\r\n  \"cbReceiptReference\": \"ZeroReceiptTSEInfo\",\r\n  \"cbReceiptMoment\": \"{{current_moment}}\",\r\n  \"cbChargeItems\": [],\r\n  \"cbPayItems\": [],\r\n  \"ftReceiptCase\": 4919338172275490818\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/json/v1/Sign",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"json",
						"v1",
						"Sign"
					]
				},
				"description": "Flagged with 0x0000000000800000\n\nRequests additional informations from used TSE device."
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "ad3b0ccc-0c76-4ae9-a5f5-6f8302d51e85",
				"type": "text/javascript",
				"exec": [
					"const dateNow= new Date();",
					"pm.environment.set('current_moment', dateNow.toISOString());"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "99dffec4-83a1-4e39-8d86-86d4825321ae",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "ee393e8e-e6c0-4311-bf46-646842c38066",
			"key": "base_url",
			"value": "http://localhost:80"
		},
		{
			"id": "3467d5bb-eeef-4930-a998-4582f950c069",
			"key": "data_format",
			"value": "json"
		},
		{
			"id": "a8796fe5-c352-424b-a915-e8b026f372e1",
			"key": "cashbox_id",
			"value": "00000000-0000-0000-0000-000000000000"
		},
		{
			"id": "134d7271-3ed5-4a15-a51f-382b764edc87",
			"key": "accesstoken",
			"value": ""
		}
	],
	"protocolProfileBehavior": {}
}